//https://www.instructables.com/id/Arduino-LeonardoMicro-as-Game-ControllerJoystick/
//https://github.com/MHeironimus/ArduinoJoystickLibrary/tree/version-2.0


#include <Joystick.h>
String domb = "";

Joystick_ Joystick[2] = {
  Joystick_(0x03, JOYSTICK_TYPE_GAMEPAD, 8, 1, true, true, true, true, false, false, false, false, false, false, false),
  Joystick_(0x04, JOYSTICK_TYPE_JOYSTICK, 8, 1, true, true, true, true, false, false, false, false, false, false, false),
};



void setup() {
//init joystick
Joystick[0].setXAxisRange(-127, 127);
Joystick[0].setYAxisRange(-127, 127);
Joystick[1].setXAxisRange(-127, 127);
Joystick[1].setYAxisRange(-127, 127);

Joystick[0].begin();
Joystick[1].begin();
  
  // Initialize Button Pins
  pinMode(9, INPUT_PULLUP);
  pinMode(10, INPUT_PULLUP);
  pinMode(11, INPUT_PULLUP);
  pinMode(12, INPUT_PULLUP);


  Serial.begin(115200);
  
}

void loop() {

  if (digitalRead(2) == HIGH) {
    Joystick[0].setButton(0, 1);
  }else {
    Joystick[0].setButton(0, 0);
  }
  
  domb += analogRead(A0);
  delay(5);
  domb += ":A0 | \n";
  domb += analogRead(A1);
  delay(5);
  domb += ":A1 | \n";
  domb += analogRead(A2);
  delay(5);
  domb += ":A2 | \n";
  domb += analogRead(A3);
  delay(5);
  domb += ":A3 | \n";
  domb += analogRead(A4);
  delay(5);
  domb += ":A4 | \n";
  domb += analogRead(A5);
  delay(5);
  domb += ":A5 | \n\n\n\n\n\n";




  

  Joystick[0].setYAxis(map(analogRead(A0), 0, 1023, 127, -127));
  Joystick[0].setXAxis(map(analogRead(A1), 0, 1023, 127, -127));

  Joystick[1].setYAxis(map(analogRead(A2), 0, 1023, 127, -127));
  Joystick[1].setXAxis(map(analogRead(A3), 0, 1023, 127, -127));

 


    
  Serial.println(domb);
  
  domb = "";












//   int HatY = map(analogRead(A0), 0, 1023, 0, 4);
//   int HatX = map((analogRead(A1)+50), 0, (1023+50), 0, 4);


//   if(HatY == 2 && HatX == 2 ){
//    Joystick.setHatSwitch(1, -1);
//   } else if(HatY > 2 && HatX == 2 ){
//    Joystick.setHatSwitch(1, 0);
//   } else if(HatY > 2 && HatX < 2 ){
//    Joystick.setHatSwitch(1, 45);
//   }  else if(HatY == 2 && HatX < 2 ){
//    Joystick.setHatSwitch(1, 90);
//   } else if(HatY < 2 && HatX < 2 ){
//    Joystick.setHatSwitch(1, 135);
//   } else if(HatY < 2 && HatX == 2 ){
//    Joystick.setHatSwitch(1, 180);
//   }


//  Joystick.setHatSwitch(1, map(analogRead(A0), 0, 1024, 0, 360));
//  Joystick.setHatSwitch(2, map(analogRead(A1), 0, 1024, 0, 360));

//  if (digitalRead(9) == HIGH) {
//    Joystick.setButton(9, 1);
//  }else {
//    Joystick.setButton(9, 0);
//  }
//  
//    if (digitalRead(9) == HIGH) {
//    Joystick.setButton(9, 1);
//  }else {
//    Joystick.setButton(9, 0);
//  }
//  
//    if (digitalRead(9) == HIGH) {
//    Joystick.setButton(9, 1);
//  }else {
//    Joystick.setButton(9, 0);
//  }


}
